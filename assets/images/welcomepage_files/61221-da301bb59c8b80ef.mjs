"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[61221],{84928:e=>{var l,t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FollowButton_pin",selections:[{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:l=[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:l,storageKey:null}],type:"Pin",abstractKey:null};t.hash="cabaa35ed7d59dee006897bf3ef32e3d",e.exports=t},780679:(e,l,t)=>{t.d(l,{g:()=>i,t:()=>n});var o=t(667294);let a=(0,o.createContext)(null),n=a.Provider,i=()=>(0,o.useContext)(a)},499128:(e,l,t)=>{t.d(l,{UZ:()=>d,Vg:()=>r,ZP:()=>u});var o=t(667294),a=t(883119),n=t(50286),i=t(829407),s=t(785893);let r=200,d=({deviceType:e,hiding:l,visible:t})=>{let o="desktop"===e,a=0,n=o?"translateY(200px)":"translateY(-200px)",i="opacity 0.1s ease-in-out",s="hidden";return t&&!l&&(a=1,n="translateY(0)",i="all 0.7s cubic-bezier(.19, 1.15, .48, 1)",s="visible"),t&&l&&(n="scale(1.1)",i="opacity transform 0.2s"),{opacity:a,pointerEvents:"auto",position:"relative",marginTop:o?10:0,transform:n,transition:i,visibility:s}};function u({_dangerouslySetThumbnail:e,_dangerouslySetPrimaryAction:l,text:t,primaryAction:u,dismissButton:c,helperLink:_,thumbnail:p,type:h,dataTestId:f,duration:m=2e3,onHide:g,href:w,onClick:x,openNewPage:y,imageUrl:b}){let v;let P=(0,n.ZP)(),[j,k]=(0,o.useState)(!1),[A,T]=(0,o.useState)(!1),z=(0,o.useRef)(),S=()=>{k(!0),z.current=setTimeout(g,r)},Z=()=>{z.current=setTimeout(S,m)},C=()=>{z.current&&clearTimeout(z.current)};(0,i.Z)(()=>(setTimeout(()=>T(!0),100),Z(),C)),b&&(v={image:(0,s.jsx)(a.Ee,{alt:"string"==typeof t?t:`${t[0]} ${t[1]}`,fit:"cover",naturalHeight:1,naturalWidth:1,src:b})});let F=(0,s.jsx)(a.FN,{_dangerouslySetPrimaryAction:l,_dangerouslySetThumbnail:e,dismissButton:c,helperLink:_,primaryAction:u,text:t,thumbnail:v??p,type:h}),{marginTop:U,opacity:E,pointerEvents:I,position:L,transform:D,transition:O,visibility:R}=d({deviceType:P,hiding:j,visible:A});return(0,s.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{transform:D,transition:O,visibility:R,pointerEvents:I}},"data-test-id":f??"toast",display:"flex",marginTop:U,onMouseEnter:C,onMouseLeave:Z,opacity:E,position:L,children:w?(0,s.jsx)(a.Tg,{href:w,onTap:({event:e,dangerouslyDisableOnNavigation:l})=>{w.startsWith("#")&&(e.preventDefault(),l()),x?.(e)},rounding:"pill",target:y?"blank":null,children:F}):F})}},356997:(e,l,t)=>{t.d(l,{qE:()=>s,u_:()=>r.ZP});var o=t(883119),a=t(785893);let n=(e,l)=>{let t=e?.includes("images/user/default");return!!(t&&l)};function i({accessibilityLabel:e,name:l,outline:t,size:i,src:s,verified:r}){return(0,a.jsx)(o.qE,{accessibilityLabel:e,name:l,outline:t,size:i,src:n(s,l)?void 0:s,verified:r})}i.displayName="Avatar";let s=i;var r=t(121151);t(499128)},458882:(e,l,t)=>{t.d(l,{l:()=>n,r:()=>i});var o=t(667294);let a=(0,o.createContext)(null),n=()=>(0,o.useContext)(a),i=a.Provider},667679:(e,l,t)=>{t.d(l,{Z:()=>n});var o=t(780679),a=t(458882);let n=()=>{let e=(0,o.g)(),l=(0,a.l)();return t=>{let{mobileOptions:o,desktopOptions:a,reason:n,attributionLabel:i,pinId:s}=t;e?e.showDesktopSignupModal({signupFlow:a?.modalType==="login"?{type:"login"}:{type:"signup"},reason:n,attributionLabel:i,...a?.modalOptions}):l&&l.showMobileSignupModal({reason:n,attributionLabel:i,headingType:o?.headingType,pinId:s})}}},985913:(e,l,t)=>{t.d(l,{Z:()=>n});var o=t(858142);let a=/\{\{\s*(\w+)\s*\}\}/g,n=(e,l)=>(0,o.Z)(a,e,l)},858142:(e,l,t)=>{t.d(l,{Z:()=>o});let o=(e,l,t)=>l?l.replace(e,(e,l)=>t&&Object.prototype.hasOwnProperty.call(t,l)?t[l]:""):""},815613:(e,l,t)=>{t.d(l,{Z:()=>j}),t(167912);var o,a=t(883119),n=t(112690),i=t(916117),s=t(898781),r=t(773285),d=t(667679),u=t(867820),c=t(52022),_=t(343341),p=t(50286),h=t(829407),f=t(19121),m=t(945698),g=t(927383),w=t(698330),x=t(201155),y=t(640064),b=t(785893);let v=({children:e,pulsar:l,testId:t})=>l.show?(0,b.jsx)(a.xu,{"data-test-id":t,position:"relative",children:(0,b.jsxs)(a.iP,{onTap:l.onClick,tapStyle:"none",children:[(0,b.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:"-75px"}},marginTop:-5,position:"absolute",children:e}),(0,b.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:"-83px"}},marginTop:-12,position:"absolute",children:(0,b.jsx)(a.o3,{})})]})}):(0,b.jsx)(a.xu,{"data-test-id":t,children:e}),P=void 0!==o?o:o=t(84928);function j({auxData:e,disabled:l,disableLog:t,followEventType:o,id:j,inline:k,invertColors:A,isFollowed:T,isIdeaPin:z,isLegoEnabled:S,isSecondaryButton:Z,isUserFollowButton:C,isUserMe:F,onFollow:U,onUnfollow:E,pinKey:I,shouldUseLegoColors:L,showPulsar:D,size:O,textType:R="FollowFollowing",unfollowEventType:H,viewParameter:N,viewType:M,clientTrackingParams:B}){let W;let K=(0,s.ZP)(),G=(0,p.HG)(),{showToast:$}=(0,_.F9)(),Y=(0,c.Z)(),V=(0,n.Z)(),q=(0,d.Z)(),{checkExperiment:X}=(0,r.F)(),Q=(0,g.Z)(),J=(0,f.Z)(),ee=J&&J.isAuth,{unauthFollowUserId:el,setUnauthFollowUserId:et}=(0,y.f)(),eo=(0,w.mN)()(j),ea=eo&&{imageMediumUrl:eo.image_medium_url,username:eo.username},en=(0,i.Z)(P,I),ei=en?.linkDomain,es=en?.nativeCreator,er=en?.originPinner,ed=en?.pinner;W=es||(ei?ei.officialUser:er||ed);let eu=ea??W;(0,h.Z)(()=>{!G&&ee&&el&&j&&el===j&&U(j)});let ec=Q({fn:()=>{ee?T?(E(j),t||V({event_type:H,view_type:M,view_parameter:N,object_id_str:j,aux_data:e,clientTrackingParams:B})):(U(j),C&&$(({hideToast:e})=>{let l=eu?.username?`/${eu.username}/`:"";return(0,b.jsx)(x.Z,{handleHide:e,href:l,imageUrl:eu?.imageMediumUrl||"",text:K._('Following! Their created Pins will show up in your home feed!', 'followButton.follow.informationalToastText', 'Text explaining that a creator\'s Pins will show up in home feed after follow'),userId:j})}),t||V({event_type:o,view_type:M,view_parameter:N,object_id_str:j,aux_data:e,clientTrackingParams:B})):((0,u.My)(`mweb_unauth_follow_button.tap.${String(M)}`),5===M&&26===o&&(0,u.My)("mweb_unauth_board_page_follow_button.tap"),(0,u.NC)(T?"press_profile_unfollow":"press_profile_follow"),Y({action:"click",item:"board-follow-button"}),q({reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",attributionLabel:z?"click_idea_pin_follow":"click_follow",desktopOptions:{modalType:"signup",modalOptions:G&&X("pcons_dweb_contextual_follow_modal").anyEnabled?{source:"followButton",container:"follow"}:void 0},mobileOptions:!G&&X("pcons_mweb_contextual_follow_modal").anyEnabled?{headingType:"follow"}:void 0}),G||et(j??""),(0,u.NC)("clickthrough"))},modalHeader:(0,m.N4)({i18n:K,toFollow:!T})}),e_=!T&&!!D,ep=()=>{if(F)return K._('That\'s you!', 'Follow button is disabled because this is you', 'Follow button is disabled because this is you');if("AddRemove"===R)return T?K._('Remove', 'unfollowButton.removeText', 'Follow button label - followed state, so user can click to "remove" the follow'):K._('Add', 'followButton.addText', 'Follow button label - unfollowed state, so user can click to "add" the follow');let e="FollowUnfollow"===R?K._('Unfollow', 'unfollowButton.unfollowText', 'Follow button label - followed state, so user can click to "unfollow" the follow'):K._('Following', 'Follow button label - followed state', 'Follow button label - followed state');return T?e:K._('Follow', 'Follow button label - unfollowed state', 'Follow button label - unfollowed state')};return(0,b.jsx)(v,{pulsar:e_?{show:!0,onClick:ec}:{show:!1},testId:F||T?"board-unfollow-button":"board-follow-button",children:(0,b.jsx)(a.zx,{accessibilityLabel:ep(),color:L||"AddRemove"===R||!S&&Z||T?"gray":"red",disabled:F||l,fullWidth:k,onClick:e_?void 0:({event:l})=>{l.preventDefault(),l.stopPropagation(),t||V({event_type:101,component:13672,element:11951,object_id_str:j,view_type:M,view_parameter:N,aux_data:e,clientTrackingParams:B}),ec()},selected:A?!T:L&&T||!!T&&Z,size:O,text:ep()})})}},640064:(e,l,t)=>{t.d(l,{f:()=>s,w:()=>r});var o=t(667294),a=t(425288),n=t(785893);let{Provider:i,useHook:s}=(0,a.Z)("Session");function r({children:e}){let[l,t]=(0,o.useState)(void 0),a=(0,o.useCallback)(()=>t(void 0),[]),s=(0,o.useMemo)(()=>({unauthFollowUserId:l,setUnauthFollowUserId:t,removeUnauthFollowUserId:a}),[l,a]);return(0,n.jsx)(i,{value:s,children:e})}},927383:(e,l,t)=>{t.d(l,{Z:()=>s});var o=t(898781),a=t(50286),n=t(987318),i=t(945698);let s=()=>{let e=(0,o.ZP)(),l=(0,a.HG)(),{viewer:t,loginForMore:s,limitedLoginModalSubheader:r,limitedLoginModalNextLocation:d}=(0,n.H)(),u="LIMITED_LOGIN"===t.type;return u?({modalHeader:t,nextLocation:o})=>a=>{let n=null;a&&(a.nativeEvent&&a.nativeEvent instanceof Event?n=a:a.event&&(n=a.event)),n&&(n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation()),s?.setVisible(!0),r?.setText(t||(l?i.hr(e):i.Wh(e))),o&&d?.setRoute(o)}:({fn:e})=>e}},230903:(e,l,t)=>{t.d(l,{Z:()=>d});var o=t(883119),a=t(121151),n=t(898781),i=t(349700),s=t(50286),r=t(785893);function d({onDismiss:e,firstName:l,handleUnfollowUser:t}){let d=(0,n.ZP)(),u=(0,s.HG)(),c=(0,i.nk)(d._('Unfollow {{ firstName }}?', 'unfollowUser.modal.header', 'header text asking if we should unfollow the user. firstName: name of the user to unfollow'),{firstName:l}).join(""),_=d._('You will no longer be able to view their profile, Pins, boards, followers or following lists. They will not be notified.', 'unFollowUser.modal.description', 'explanation of what removing another user means'),p=d._('Cancel', 'unfollowUser.modal.cancel', 'Cancel unfollowing a user'),h=d._('Unfollow', 'unfollowUser.modal.button.unfollow', 'Button to confirm removing a user');return u?(0,r.jsx)(a.ZP,{accessibilityModalLabel:c,footer:(0,r.jsxs)(o.xu,{alignItems:"center",display:"flex",justifyContent:"end",marginEnd:-1,marginStart:-1,children:[(0,r.jsx)(o.xu,{padding:1,children:(0,r.jsx)(o.zx,{fullWidth:!0,onClick:e,size:"lg",text:p})}),(0,r.jsx)(o.xu,{padding:1,children:(0,r.jsx)(o.zx,{color:"red",fullWidth:!0,onClick:t,size:"lg",text:h})})]}),heading:c,onDismiss:e,role:"alertdialog",size:"md",children:(0,r.jsx)(o.xu,{"data-test-id":"unfollow-text",marginEnd:6,marginStart:6,children:(0,r.jsx)(o.xv,{children:_})})}):(0,r.jsxs)(a.ZP,{accessibilityModalLabel:c,mobileHideCloseIcon:!0,onDismiss:e,type:"unFollow_button",children:[(0,r.jsx)(o.xu,{alignItems:"center",display:"flex",paddingX:3,paddingY:5,children:(0,r.jsx)(o.X6,{accessibilityLevel:1,size:"500",children:c})}),(0,r.jsx)(o.xu,{marginBottom:4,marginEnd:4,marginStart:4,children:(0,r.jsx)(o.xv,{children:_})}),(0,r.jsxs)(o.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginBottom:8,children:[(0,r.jsx)(o.xu,{padding:1,children:(0,r.jsx)(o.zx,{fullWidth:!0,onClick:e,size:"md",text:p})}),(0,r.jsx)(o.xu,{padding:1,children:(0,r.jsx)(o.zx,{color:"red",fullWidth:!0,onClick:t,size:"md",text:h})})]})]})}},90326:(e,l,t)=>{t.d(l,{Ge:()=>d,JS:()=>i,OF:()=>y,P_:()=>s,Q_:()=>_,b8:()=>p,eR:()=>x,h2:()=>u,h6:()=>c});var o=t(214494),a=t(186656),n=t(735422);function i(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}let s=(e,l)=>({type:"USER_FOLLOW",payload:{id:e,value:l}}),r=(e,l)=>({type:"USER_BLOCK",payload:{id:e,value:l}}),d=({id:e,orbacSubjectId:l,blockSource:t,blockContext:a,logContextEvent:n})=>async i=>{i(r(e,!0));let s=await o.Z.create("UserBlockResource",{blocked_user_id:e,orbac_subject_id:l,block_source:t,block_context:a}).callCreate().catch(()=>i(r(e,!1)));return n({event_type:54,object_id_str:e}),s},u=(e,l)=>async t=>{t(r(e,!1));let a=await o.Z.create("UserBlockResource",{blocked_user_id:e}).callDelete().catch(()=>t(r(e,!0)));return l({event_type:55,object_id_str:e}),a};function c(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}let _=(e,l)=>()=>{let t=o.Z.create("UserStateResource",{state:e,value:l});return t.callCreate()},p=(e,l,t)=>(o,i)=>{(0,a.Z)({url:"/v3/users/me/",method:"POST"}).then(()=>{t({event_type:48,object_id_str:i().session.userId}),e(),(0,n.Dm)()},l)},h=e=>e>=200&&e<400,f=(e,l="150x150")=>e&&`https://i.pinimg.com/${l}/${e.substring(0,2)}/${e.substring(2,4)}/${e.substring(4,6)}/${e}.jpg`||"",m=async(e,l,t)=>{let a=await o.Z.create("VIPResource",{upload_ids:[e]}).callGet();if(a.resource_response.data[e]){let o=a.resource_response.data[e],{status:n,signature:i}=o;if("processing"===n||"registered"===n)setTimeout(async()=>{m(e,l,t)},5e3);else if("succeeded"===n){let e=f(i);l(e)}else t()}else t()},g=(e,l,t,a,n)=>{let i=new FormData;return i.append("img",e),o.Z.create("VIPResource",{type:l}).callCreate().then(l=>{if(l.resource_response.data){let{upload_id:o,upload_url:i,upload_parameters:s}=l.resource_response.data,r=new XMLHttpRequest;r.open("POST",i,!0),r.onload=()=>{h(r.status)?(t(100),m(o,a,n)):n()},r.upload.onprogress=e=>{let l=Math.round(100*e.loaded/e.total);t(l)};let d=new FormData;for(let e in s)d.append(e,s[e]);d.append("file",e),r.send(d)}},()=>{n()})},w=e=>new Promise((l,t)=>{g(e,"pinimage",()=>{},e=>{l(e)},e=>{t(e)})}),x=e=>new Promise((l,t)=>{"string"==typeof e?e.startsWith("data")&&w(function(e,l=512){let t=e.split(";"),o=t[0].split(":")[1],a=t[1].split(",")[1],n=atob(a),i=[];for(let e=0;e<n.length;e+=l){let t=n.slice(e,e+l),o=Array(t.length);for(let e=0;e<t.length;e+=1)o[e]=t.charCodeAt(e);let a=new Uint8Array(o);i.push(a)}let s=new Blob(i,{type:o});return s}(e)).then(e=>l(e)):t("Invalid Image")}),y=e=>()=>(0,a.Z)({url:"/v3/register/exists/",data:{email:e}})},201155:(e,l,t)=>{t.d(l,{Z:()=>u});var o=t(883119),a=t(499128),n=t(898781),i=t(784590),s=t(50286),r=t(785893);function d({ideaPinImages:e}){let l=e.map((e,l)=>(0,r.jsx)(o.xu,{borderStyle:"sm",color:"default",dangerouslySetInlineStyle:{__style:{borderColor:"white",marginInlineEnd:"-17px",WebkitMaskImage:"-webkit-radial-gradient(white, black)",zIndex:l}},height:48,overflow:"hidden",rounding:2,width:28,children:(0,r.jsx)(o.Ee,{alt:"",color:"#696969",fit:"cover",naturalHeight:e?.height??1,naturalWidth:e?.width??1,src:e?.url??""})},l));return(0,r.jsx)(o.kC,{justifyContent:"center",children:(0,r.jsx)(o.kC,{justifyContent:"start",width:{1:28,2:40,3:48}[e.length],children:l})})}function u({handleHide:e,text:l,userId:t,href:u,imageUrl:c}){let _=(0,n.ZP)(),p=(0,s.HG)(),h=(0,i.Z)({name:"UserStoryPinsFeedResource",options:{data:{filter_version:2,public_only:!0},field_set_key:"partner_grid_item",user_id:t}}),f=Array.isArray(l)?l.join(" "):l;if(0===(h.data||[]).length)return(0,r.jsx)(a.ZP,{duration:5e3,href:u,onHide:e,text:f,thumbnail:c?{image:(0,r.jsx)(o.Ee,{alt:_._('Image of who you followed', 'userFollowingToast.thumbnail.userImage', 'Profile thumbnail of the user you followed'),fit:"cover",naturalHeight:1,naturalWidth:1,src:c})}:void 0});let m=(h.data||[]).slice(0,3).map(e=>e.images?.[p?"236x":"170x"]),g=(0,r.jsx)(d,{ideaPinImages:m});return(0,r.jsx)(a.ZP,{_dangerouslySetThumbnail:g,duration:5e3,href:u,onHide:e,text:f})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/61221-da301bb59c8b80ef.mjs.map